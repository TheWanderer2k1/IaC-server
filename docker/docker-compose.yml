services:
  app:
    build:
      context: ..
      dockerfile: docker/app/dockerfile
    restart: always
    volumes:
      - /root/IaC-server:/IaC-server
      - /root/IaC_user_workspace:/root/IaC_user_workspace # map user workspace
    ports:
      - "8000:8000"

  queue_worker:
    build:
      context: ..
      dockerfile: docker/queue_worker/dockerfile
    restart: always
    volumes:
      - /root/IaC-server:/IaC-server

  redis:
    image: redis:latest
    restart: always
    ports:
      - "127.0.0.1:6379:6379"

  mongodb:
    image: mongo:latest
    restart: always
    ports:
      - "127.0.0.1:27017:27017"
